# /concept.generate

Generate final formatted conceptual model document.

## Purpose

Create a polished, production-ready version of your conceptual model with proper formatting, table of contents, and optional PDF export.

## Usage

```
/concept.generate
```

## Workflow

When this command is executed, follow these steps:

### 1. Locate Conceptual Model

Find the active conceptual model file in `docs/`:
- If multiple exist, ask which one to generate
- If none exist, guide user to `/concept.init`

### 2. Validate Model Completeness

Run a quick completeness check:
- Must be at least 50% complete
- Must have at least 3 objects defined
- Must have at least 1 workflow

If below threshold:
```
âš ï¸  Model Completeness Warning

Your model is currently <percentage>% complete.
Recommended minimum: 50%

Missing critical elements:
â€¢ <missing-item-1>
â€¢ <missing-item-2>

Would you like to:
1. Generate anyway (document will have gaps)
2. Cancel and improve model first (/concept.review)

Choice: _
```

### 3. Read Current Model

Load the entire working file from `docs/conceptual-model-<name>.md`.

### 4. Generate Final Document

Create a new file: `docs/conceptual-model-<name>-final.md`

Apply the following enhancements:

#### Header and Metadata

```markdown
# Conceptual Model: <ApplicationName>

**Version:** 1.0.0
**Generated:** <current-date>
**Status:** Final
**Completeness:** <percentage>%

---

> **About this document:**
> This conceptual model describes how users think about and interact with <ApplicationName>.
> Based on Johnson & Henderson's Conceptual Models Framework.
>
> **Generated with:** [Conceptual Kit](https://github.com/Lab-Secreto/conceptual-kit)

---
```

#### Table of Contents

Generate automatic TOC with links:

```markdown
## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Core Conceptual Model](#2-core-conceptual-model)
   - 2.1 [Central Metaphor](#21-central-metaphor)
   - 2.2 [Key Principles](#22-key-principles)
3. [Object Model](#3-object-model)
   - 3.1 [Object: User](#31-object-user)
   - 3.2 [Object: Recipe](#32-object-recipe)
   [... for each object ...]
4. [Relationships & Rules](#4-relationships--rules)
5. [User Actions & Workflows](#5-user-actions--workflows)
   [... subsections ...]
6. [Information Architecture](#6-information-architecture)
7. [State Model](#7-state-model)
8. [Error & Exception Handling](#8-error--exception-handling)
9. [Metaphorical Consistency](#9-metaphorical-consistency)
10. [Progressive Disclosure Model](#10-progressive-disclosure-model)
11. [Platform-Specific Adaptations](#11-platform-specific-adaptations)
12. [Design Principles from Model](#12-design-principles-from-model)
13. [Implementation Notes](#13-implementation-notes)
14. [Validation & Testing](#14-validation--testing)
15. [Appendices](#15-appendices)

---
```

#### Format All Sections

- Ensure consistent heading levels
- Clean up ASCII diagrams (align properly)
- Add horizontal rules between major sections
- Ensure all lists use consistent bullet styles
- Add page breaks for PDF (using `---`)

#### Add Statistics Summary

At the end before appendices:

```markdown
---

## Document Statistics

**Model Overview:**
- Objects Defined: <count>
- Relationships Mapped: <count>
- Workflows Documented: <count>
- Total Sections: 15
- Completeness: <percentage>%
- Word Count: ~<count>
- Estimated Reading Time: <minutes> minutes

**Objects Summary:**
<list-all-objects-with-brief-description>

**Key Relationships:**
<list-main-relationships>

**Core Workflows:**
<list-all-workflows>

---
```

#### Enhance Appendices

Add/update:

```markdown
## 15. Appendices

### 15.1 Glossary

**Term** | **Definition**
---------|---------------
<Object1> | <mental-model-description>
<Object2> | <mental-model-description>
[... all objects ...]

### 15.2 Document History

**Version** | **Date** | **Changes**
------------|----------|------------
1.0.0 | <today> | Initial final version generated

### 15.3 Related Documents

- Product Requirements Document
- Technical Architecture Spec
- Design System Documentation
- User Research Findings

### 15.4 References

- Johnson, J., & Henderson, A. (1991). Conceptual Models: Begin by Designing What to Design
- Norman, D. (2013). The Design of Everyday Things
- Nielsen, J. (2010). Mental Models

### 15.5 Generation Info

**Generated by:** Conceptual Kit v0.1.0
**Source file:** docs/conceptual-model-<name>.md
**Generated on:** <timestamp>
**Environment:** Claude Code

---

*End of Document*
```

### 5. Generate PDF (Optional)

Check if `pandoc` is available:

```bash
which pandoc
```

If available, generate PDF:

```bash
pandoc docs/conceptual-model-<name>-final.md \
  -o docs/conceptual-model-<name>.pdf \
  --toc \
  --toc-depth=3 \
  --number-sections \
  --pdf-engine=xelatex \
  -V geometry:margin=1in \
  -V fontsize=11pt \
  -V documentclass=report
```

If pandoc not available, show instructions:

```
â„¹ï¸  PDF generation requires pandoc

To generate PDF, install pandoc:
  macOS:    brew install pandoc
  Ubuntu:   sudo apt-get install pandoc
  Windows:  choco install pandoc

Then run: pandoc docs/conceptual-model-<name>-final.md -o docs/conceptual-model-<name>.pdf --toc
```

### 6. Calculate Statistics

Count:
- Total objects
- Total relationships
- Total workflows
- Word count
- Section completeness
- Reading time estimate (200 words/minute)

### 7. Display Success Message

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âœ… Final Document Generated Successfully           â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘                                                     â•‘
â•‘ Application: <ApplicationName>                     â•‘
â•‘ Model Version: 1.0.0                               â•‘
â•‘ Completeness: <percentage>%                        â•‘
â•‘                                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ FILES CREATED                                       â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘                                                     â•‘
â•‘ ğŸ“„ Markdown (Final)                                 â•‘
â•‘    docs/conceptual-model-<name>-final.md           â•‘
â•‘    Size: <size> KB                                 â•‘
â•‘                                                     â•‘
â•‘ ğŸ“„ PDF Document                                     â•‘
â•‘    docs/conceptual-model-<name>.pdf                â•‘
â•‘    Size: <size> KB                                 â•‘
â•‘    Pages: <count>                                  â•‘
â•‘                                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ DOCUMENT STATISTICS                                 â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘                                                     â•‘
â•‘ Objects:           <count>                         â•‘
â•‘ Relationships:     <count>                         â•‘
â•‘ Workflows:         <count>                         â•‘
â•‘ Word Count:        ~<count> words                  â•‘
â•‘ Reading Time:      ~<minutes> minutes              â•‘
â•‘ Sections:          15                              â•‘
â•‘                                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ QUICK SUMMARY                                       â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘                                                     â•‘
â•‘ ğŸ“¦ Objects:                                         â•‘
â•‘    â€¢ <Object1> - <brief-description>               â•‘
â•‘    â€¢ <Object2> - <brief-description>               â•‘
â•‘    â€¢ <Object3> - <brief-description>               â•‘
â•‘    [...]                                           â•‘
â•‘                                                     â•‘
â•‘ ğŸ”— Key Relationships:                               â•‘
â•‘    â€¢ <From> â†’ <To> (<type>)                        â•‘
â•‘    â€¢ <From> â†’ <To> (<type>)                        â•‘
â•‘    [...]                                           â•‘
â•‘                                                     â•‘
â•‘ âš¡ Core Workflows:                                  â•‘
â•‘    â€¢ <Workflow1>                                   â•‘
â•‘    â€¢ <Workflow2>                                   â•‘
â•‘    [...]                                           â•‘
â•‘                                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ NEXT STEPS                                          â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘                                                     â•‘
â•‘ âœ… Share with stakeholders                          â•‘
â•‘    The final document is ready for review          â•‘
â•‘                                                     â•‘
â•‘ âœ… Add to design system                             â•‘
â•‘    Include in project documentation                â•‘
â•‘                                                     â•‘
â•‘ âœ… Use in onboarding                                â•‘
â•‘    Help new team members understand the model      â•‘
â•‘                                                     â•‘
â•‘ âœ… Validate with users                              â•‘
â•‘    Test if mental models match reality             â•‘
â•‘                                                     â•‘
â•‘ ğŸ“ Continue iteration                               â•‘
â•‘    Keep working file for future updates:           â•‘
â•‘    docs/conceptual-model-<name>.md                 â•‘
â•‘                                                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Happy modeling! ğŸ¨ğŸ§ 

Need to make changes?
â†’ Edit the working file: docs/conceptual-model-<name>.md
â†’ Re-generate anytime: /concept.generate
```

### 8. Preserve Working File

Important: Keep the original `docs/conceptual-model-<name>.md` intact for future edits.
The `-final.md` file is a snapshot that can be regenerated.

## Important Guidelines

1. **Don't Overwrite Working File**: Generate creates a NEW file with `-final` suffix
2. **Completeness Warning**: Warn if model is <50% complete
3. **Format Consistency**: Ensure professional formatting throughout
4. **Statistics Accuracy**: Count actual items, don't estimate
5. **PDF is Optional**: Don't fail if pandoc unavailable

## Completeness Thresholds

### Can Generate (50%+)
- Minimum 3 objects defined
- At least 1 workflow
- Basic relationships mapped
- Executive summary complete

### Should Generate (70%+)
- Most objects fully defined
- Multiple workflows
- Good relationship coverage
- Most sections have content

### Ideal to Generate (85%+)
- Comprehensive object definitions
- All key workflows documented
- Full relationship map
- All sections complete

## Examples

### Example 1: Standard Generation

```
User: /concept.generate

Checks:
- Model completeness: 78%
- Objects: 5
- Workflows: 4
- Relationships: 7

Result:
âœ… Generated docs/conceptual-model-recipe-book-final.md
âœ… Generated docs/conceptual-model-recipe-book.pdf
Statistics: 5 objects, 7 relationships, 4 workflows, ~3,450 words
```

### Example 2: Low Completeness

```
User: /concept.generate

Checks:
- Model completeness: 42%
- Objects: 2
- Workflows: 0

Warning displayed, user confirms anyway.

Result:
âœ… Generated docs/conceptual-model-todo-app-final.md
âš ï¸  PDF skipped (pandoc not available)
Note: Model is incomplete. Consider running /concept.review
```

## Error Handling

- **No conceptual model**: "No model found. Run /concept.init first"
- **Empty model**: "Model is empty. Add objects with /concept.add-object"
- **<30% complete**: "Model too incomplete to generate. Run /concept.review for guidance"
- **File write error**: "Could not write file. Check permissions"
- **Pandoc error**: Show pandoc installation instructions

## Post-Generation

After generation, suggest:
1. Review the final document
2. Share with team for feedback
3. Validate with users
4. Add to documentation repo
5. Version control both working and final files

## File Management

**Working File** (keep editing this):
```
docs/conceptual-model-<name>.md
```

**Generated File** (snapshot, regenerate when needed):
```
docs/conceptual-model-<name>-final.md
```

**PDF File** (optional, regenerate when needed):
```
docs/conceptual-model-<name>.pdf
```

## Reference

- See `examples/` for example final documents
- Check `templates/base-model.md` for section structure
- Read `conceptual-modeling.md` for quality standards
